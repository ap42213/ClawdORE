version: "2"

build:
  builder: NIXPACKS
  nixpacksPlan:
    phases:
      setup:
        nixPkgs:
          - rustup
          - cargo
          - gcc
          - openssl
          - pkg-config
      build:
        cmds:
          - cargo build --release --bin simulation-bot

deploy:
  startCommand: ./target/release/simulation-bot
  restartPolicyType: ON_FAILURE
  restartPolicyMaxRetries: 10
